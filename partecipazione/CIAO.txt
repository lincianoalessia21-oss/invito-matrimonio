<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>Partecipazione M & V</title>
<style>
body {
  margin: 0;
  padding: 0;
  width: 100vw;
  min-height: 100vh;
  background-color: #6b7b57; /* verde oliva */
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
  font-family: 'Great Vibes', cursive;
  flex-direction: column;
  overflow: hidden;
}

/* Container video */
#videoContainer {
  position: fixed;
  inset: 0;
  display: none;
  background: black;
  z-index: 5;
  opacity: 1;
  transition: opacity 1.5s ease;
}

video {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* Timbro immagine */
#seal {
  position: relative;
  z-index: 10;
  cursor: pointer;
  width: 150px;
  height: auto;
}

/* SVG diagonali */
#diagonals {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 1;
  transition: opacity 1.5s ease;
}

/* Container countdown a quadratini */
#countdown {
  display: none; /* nascosto all'inizio */
  display: flex;
  gap: 20px;
  justify-content: center;
  align-items: center;
  margin-top: 50px;
}

.countBox {
  width: 80px;
  height: 80px;
  background: white;
  color: black;
  font-size: 2em;
  display: flex;
  justify-content: center;
  align-items: center;
  border-radius: 10px;
  font-family: 'Arial', sans-serif;
}
</style>
</head>
<body>

<!-- SVG diagonali -->
<svg id="diagonals" width="100%" height="100%">
  <line x1="0" y1="0" x2="50%" y2="55%" stroke="#d4d1b0" stroke-width="2"/>
  <line x1="100%" y1="0" x2="50%" y2="55%" stroke="#d4d1b0" stroke-width="2"/>
</svg>

<!-- Timbro immagine -->
<img id="seal" src="prova3/sigillo.png" alt="Timbro M & V">

<!-- Container video -->
<div id="videoContainer">
  <video id="myVideo" controls autoplay muted playsinline>
    <source src="prova3/prova2.mp4" type="video/mp4">
    Il tuo browser non supporta il video.
  </video>
</div>

<!-- Countdown a quadratini -->
<div id="countdown">
  <div class="countBox" id="days">00</div>
  <div class="countBox" id="hours">00</div>
  <div class="countBox" id="minutes">00</div>
  <div class="countBox" id="seconds">00</div>
</div>

<script>
const seal = document.getElementById("seal");
const videoContainer = document.getElementById("videoContainer");
const video = document.getElementById("myVideo");
const diagonals = document.getElementById("diagonals");
const countdown = document.getElementById("countdown");
const daysBox = document.getElementById("days");
const hoursBox = document.getElementById("hours");
const minutesBox = document.getElementById("minutes");
const secondsBox = document.getElementById("seconds");

// Click sul timbro: mostra il video
seal.addEventListener("click", () => {
  seal.style.display = "none";
  videoContainer.style.display = "block";
  video.currentTime = 0;
  video.play().catch(err => console.error("Errore video:", err));
});

// Alla fine del video: dissolvenza, scompare video e diagonali, mostra countdown
video.addEventListener("ended", () => {
  // fade out video
  videoContainer.style.opacity = 0;
  diagonals.style.opacity = 0;

  setTimeout(() => {
    videoContainer.style.display = "none";
    countdown.style.display = "flex"; // mostra countdown
    startCountdown("2026-07-24T00:00:00");
  }, 1500); // durata dissolvenza
});

// Funzione countdown
function startCountdown(dateString) {
  const countDate = new Date(dateString).getTime();

  const interval = setInterval(() => {
    const now = new Date().getTime();
    const distance = countDate - now;

    if(distance < 0){
      clearInterval(interval);
      daysBox.innerHTML = "00";
      hoursBox.innerHTML = "00";
      minutesBox.innerHTML = "00";
      secondsBox.innerHTML = "00";
      return;
    }

    const days = Math.floor(distance / (1000*60*60*24));
    const hours = Math.floor((distance % (1000*60*60*24))/(1000*60*60));
    const minutes = Math.floor((distance % (1000*60*60))/(1000*60));
    const seconds = Math.floor((distance % (1000*60))/1000);

    daysBox.innerHTML = String(days).padStart(2,'0');
    hoursBox.innerHTML = String(hours).padStart(2,'0');
    minutesBox.innerHTML = String(minutes).padStart(2,'0');
    secondsBox.innerHTML = String(seconds).padStart(2,'0');

  }, 1000);
}
</script>

</body>
</html>
